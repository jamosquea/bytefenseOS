#!/bin/bash
# Bytefense OS - Script de Pre-eliminaci√≥n

set -e

log() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1" | tee -a "/var/log/bytefense-remove.log"
}

case "$1" in
    remove|upgrade|deconfigure)
        log "üõë Deteniendo servicios de Bytefense OS..."
        
        # Detener servicios
        systemctl stop bytefense-dashboard.service 2>/dev/null || true
        systemctl stop bytefense-watch.service 2>/dev/null || true
        
        # Deshabilitar servicios
        systemctl disable bytefense-dashboard.service 2>/dev/null || true
        systemctl disable bytefense-watch.service 2>/dev/null || true
        
        log "‚úÖ Servicios detenidos"
        ;;
        
    failed-upgrade)
        log "‚ùå Fallo en actualizaci√≥n"
        ;;
        
    *)
        log "‚ùì Acci√≥n desconocida: $1"
        ;;
esac

exit 0